{% extends 'base.html' %}
{% block title %}Panel principal{% endblock %}

{% block extra_css %}
<style>
  .card-app{
    border:0;
    border-radius:2rem; /* rounded-5 */
    transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease;
  }
  .card-app:hover{
    transform:translateY(-2px);
    box-shadow:0 .65rem 1.25rem rgba(0,0,0,.08);
  }
  .card-app .accent{
    width:56px; height:4px; border-radius:999px;
  }
  .text-2lines{
    display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
  }
  .text-3lines{
    display:-webkit-box; -webkit-line-clamp:3; -webkit-box-orient:vertical; overflow:hidden;
  }
</style>
{% endblock %}

{% block content %}
  <div class="d-flex flex-wrap align-items-end justify-content-between gap-2 mb-4">
    <div>
      <h1 class="h3 fw-bold mb-1">Panel principal</h1>
      <p class="text-muted mb-0">Elige un área para trabajar.</p>
    </div>
    {% block page_actions %}
    <!-- espacio para acciones rápidas si un día las necesitas -->
    {% endblock %}
  </div>

  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    {% for slug, meta in secciones.items %}
      <div class="col d-flex">
        <div class="card card-app h-100 w-100">
          <div class="card-body d-flex flex-column p-4">
            <div class="d-flex align-items-center justify-content-between mb-2">
              <span class="small text-uppercase text-muted">Área</span>
              <span class="badge text-bg-light border fw-normal">{{ meta.propuestas|length }} propuestas</span>
            </div>

            <div class="accent mb-3
              {% if slug == 'calidad_rh' %}bg-primary
              {% elif slug == 'calidad' %}bg-info
              {% elif slug == 'rh' %}bg-success
              {% elif slug == 'dos_sgc' %}bg-warning
              {% else %}bg-secondary{% endif %}"></div>

            <h2 class="h5 fw-semibold mb-2 text-2lines">{{ meta.titulo }}</h2>
            <p class="text-muted small mb-3 text-3lines">{{ meta.justificacion }}</p>

            <ul class="list-unstyled small text-muted mb-4">
              {% for p in meta.propuestas %}
                <li class="d-flex align-items-start gap-2 mb-1">
                  <span class="d-inline-block rounded-circle mt-1" style="width:.4rem;height:.4rem;background:var(--bs-secondary);"></span>
                  <span class="text-2lines">{{ p }}</span>
                </li>
              {% endfor %}
            </ul>

            <div class="mt-auto d-flex">
              {% comment %} usar reverse por nombre de ruta {% endcomment %}
              {% if slug == 'calidad_rh' %}
                <a href="{% url 'calidad_rh' %}" class="stretched-link btn btn-primary w-100">Entrar</a>
              {% elif slug == 'dos_sgc' %}
                <a href="{% url 'dos_sgc' %}" class="stretched-link btn btn-primary w-100">Entrar</a>
              {% else %}
                <a href="{% url slug %}" class="stretched-link btn btn-primary w-100">Entrar</a>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% endblock %}
